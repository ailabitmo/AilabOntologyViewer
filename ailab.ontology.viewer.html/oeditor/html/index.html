<html>
<head>
    <title>Ontology Editor</title>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <meta charset="utf-8">
</head>
<body>
<div id="infs"></div>

<!--!!!!!!!!!!!!!!!!!!!!INCLUDES!!!!!!!!!!!!!!!!!!!!!!!!!!!!!-->
<link rel="stylesheet" href="../css/general.css">
<!--General libs-->
<script src="../js/libs/d3.v3.js"></script>
<script src="../js/libs/jquery-2.0.2.js"></script>
<!--Libs for beautiful treeview-->
<script src="../js/libs/jquery.treeview.js"></script>
<script src="../js/libs/jquery.cookie.js"></script>
<link rel="stylesheet" href="../css/libs/jquery.treeview.css">
<!--My libs-->
<script src="../js/libs/primitives.js"></script>
<script src="../js/libs/klib.js"></script>
<!--Main code-->
<script src="../js/libs/uuid.js?112"></script>
<script>

    var arr = d3.range(10);
    var requests = {};

    var xx = d3.select("#infs").selectAll("div");
    xx.data(arr).enter().append("div").each(function(d){
        var thisEl = d3.select(this).append("span");
        var waitHandler = function (str) {
            thisEl.attr("style", "color:green").text(str);
        }
        var finishHandler = function (str) {
            thisEl.attr("style", "color:blue").text(str);
        }
        var errorHandler = function(str){
            thisEl.attr("style", "color:red").text(str);
        }
        var request = kiv.smartServerRequest({request:d+"",url: "http://localhost/test/123",
            waitHandler: waitHandler, finishHandler: finishHandler, errorHandler:errorHandler,
            interval:1000
        });
        requests[request.getGuid()] = request;
        d3.select(this).append("button").attr("onclick",function(){
            return "requests['"+request.getGuid()+"'].cancel();";
        }).text("Cancel");
    });


</script>
</body>
</html>